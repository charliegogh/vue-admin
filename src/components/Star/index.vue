<template>
  <div class="x-rating">
    <span
      v-for="star in stars"
      :key="star"
      class="x-star"
      @click="selectRating(star)"
      @mouseenter="hoverRating = star"
      @mouseleave="hoverRating = 0"
    >
      <svg
        t="1685321244130"
        class="x-star-icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          :d="
            star <= rating
              ? 'M901.546667 384L682.666667 351.146667a42.666667 42.666667 0 0 1-32-23.466667L550.826667 128a42.666667 42.666667 0 0 0-77.653334 0l-98.133333 199.68a42.666667 42.666667 0 0 1-33.706667 23.466667L122.453333 384a42.666667 42.666667 0 0 0-24.32 72.533333l160 155.306667a42.666667 42.666667 0 0 1 12.373334 37.973333l-37.973334 219.306667a42.666667 42.666667 0 0 0 63.146667 45.653333L492.373333 810.666667a40.106667 40.106667 0 0 1 39.253334 0l196.693333 102.826666a42.666667 42.666667 0 0 0 63.146667-45.653333l-37.973334-219.306667a42.666667 42.666667 0 0 1 12.373334-37.973333l160-154.026667a42.666667 42.666667 0 0 0-24.32-72.533333z'
              : 'M512 223.146667l67.84 138.24A119.466667 119.466667 0 0 0 670.293333 426.666667l152.746667 22.186666-110.506667 107.946667a119.04 119.04 0 0 0-34.56 106.24l26.026667 152.746667-136.533333-72.106667a119.466667 119.466667 0 0 0-110.933334 0l-136.533333 72.106667 26.026667-152.746667a119.04 119.04 0 0 0-34.56-106.24l-110.506667-107.52L353.706667 426.666667a119.466667 119.466667 0 0 0 90.453333-65.706667L512 223.146667m0-119.04a42.666667 42.666667 0 0 0-38.826667 24.32l-98.133333 199.253333a42.666667 42.666667 0 0 1-33.706667 23.466667L122.453333 384a42.666667 42.666667 0 0 0-24.32 72.533333l160 155.306667a42.666667 42.666667 0 0 1 12.373334 37.973333l-37.973334 219.306667a42.666667 42.666667 0 0 0 42.666667 50.773333 37.973333 37.973333 0 0 0 20.053333-5.12L492.373333 810.666667a40.106667 40.106667 0 0 1 39.253334 0l196.693333 102.826666a37.973333 37.973333 0 0 0 20.053333 5.12 42.666667 42.666667 0 0 0 42.666667-50.773333l-37.973333-219.306667a42.666667 42.666667 0 0 1 12.373333-37.973333l160.426667-154.026667a42.666667 42.666667 0 0 0-24.32-72.533333L682.666667 351.146667a42.666667 42.666667 0 0 1-32-23.466667L550.826667 128a42.666667 42.666667 0 0 0-38.826667-23.893333z'
          "
          :fill="star <= rating || star <= hoverRating ? '#FFAA00' : '#d6d8db'"
        />
      </svg>
    </span>
  </div>
</template>
<script>
export default {
  name: 'Star',
  props: {
    maxRating: {
      type: Number,
      default: 5
    },
    selectedRating: {
      type: Number,
      default: 0
    }
  },
  data() {
    return {
      rating: this.selectedRating,
      hoverRating: 0
    }
  },
  computed: {
    stars() {
      return Array.from({ length: this.maxRating }, (_, index) => index + 1)
    }
  },
  methods: {
    selectRating(rating) {
      if (rating === this.rating) {
        this.rating = 0
      } else {
        this.rating = rating
      }
    }
  }
}
</script>
<style scoped>
.x-rating {
  height: 50px;
  display: flex;
  align-items: center;
}
.x-star {
  width: 17px;
  height: 16px;
  cursor: pointer;
}
.x-star-icon {
  height: 100%;
  transition: fill 0.2s;
}
</style>
